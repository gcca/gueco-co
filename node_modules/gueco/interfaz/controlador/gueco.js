/*! gueco.interfaz.controlador
 */

var gueco_no = require('./gueco.node')

var repositorio_conocimiento = require(
	'gueco/infraestructura/persistencia/mongoskin/repositorio_conocimiento')

gueco.prototype.gueco = function(peticion, respuesta) {
	/*var ar = []
	  for (var i in d) {
	  var m  = d[i].length-1;
	  var n = 0;
	  var t = '(' + i + ' ' + d[i][Math.floor(Math.random()*(m-n+1))+n] + ')'
	  ar.push(t)
	  }*/
	var ar = peticion.cuerpo

	var r = new repositorio_conocimiento

	//respuesta.send(ar.concat(ll))

	r.uno({ nombre: 'ofensivo' }, function (e, BC) {
		if (e) {
			response.send(e)
		} else {
			var ll = gueco_no.procesa(ar, BC.reglas)
			respuesta.send(ll)
			//respuesta.send(["enodef", "vearma", "avaproxodespl", "nbelmed"]);
		}
	})

}

function gueco () {}

module.exports = gueco
